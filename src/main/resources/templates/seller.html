<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>판매자 페이지</title>
</head>
<body>
    <div style="padding: 50px;">
        <div>
        <h3>판매자 홈</h3>
        </div>
        
        <hr />
       
            <h4>물품목록</h4>
            <a th:href="@{/seller/insertitem}">물품등록</a>
        
        
        <table>
            <thead>
            <tr>
            <th>번호</th>
            <th>물품코드</th>
            <th>물품명</th>
            <th>가격</th>
            <th>수량</th>
            <th>등록일</th>
            <th>이미지</th>
            <th>버튼</th>
            </tr>
        </thead>

            <tbody>
            <tr th:each="tmp,idx : ${list}">
                <td th:text="${idx.count}"></td>
                <td>
                    <a th:href="@{/seller/itemselectone(code=${tmp.icode})}"
                    th:text="${tmp.icode}"></a>
                </td>
                <td th:text="${tmp.iname}"></td>
                <td th:text="${tmp.iprice}"></td>
                <td th:text="${tmp.iquantity}"></td>
                <td th:text="${tmp.iregdate}"></td>
                <td><img th:src="@{/item/image(code=${tmp.icode})}" style="width:50px"></td>
                
                <td>
                    <button th:onclick="|javascript:handleUpdate('${tmp.icode}')|">수정</button>
        			<button th:onclick="|javascript:handleDelete('${tmp.icode}')|">삭제</button>
                </td>
            </tr>
            </tbody>
        </table>

        <div class="pagination">
            <th:block th:each="i : ${#numbers.sequence(1, pages)}">
                <a th:href="@{/seller/home(page=${i}, txt=${param.txt})}" th:text="${i}"></a>
            </th:block>
            </div>
            
        </div>
    </div>
    <script>

        function handleUpdate(no) {
			// GET으로 삭제 처리 주소창을 바꿈
			location.href="/ROOT/seller/updateitem?code=" + no;
		}

		function handleDelete(no){
            if(confirm('삭제할까요?')){
                console.log(no);
                // GET으로 삭제 처리 주소창을 바꿈
                // location.href="/ROOT/seller/deleteitem?code="+no;

                // POST로 처리

                // <form th:action="@{/seller/deleteitem}" method="post">
                var form = document.createElement("form");
                form.method="post";
                form.action="/ROOT/seller/deleteitem";
                
                //<input type-"text" name="code" value="전달되는 번호" />
                var input = document.createElement("input");
                input.name="code";
                input.value=no;
                
                // security를 csrf 토큰값 전송용 (보안)
                var input1 = document.createElement("input");
                input1.type="hidden";
                input1.name="_csrf";
                input1.value='[[${_csrf.token}]]';
                
                // input type을 form태그에 추가
                form.appendChild(input);
                form.appendChild(input1);

                // form document에 추가
                document.body.appendChild(form);

                // <input type="submit">을 누름
                form.submit();
            }
		}

	</script>
</body>
</html>

<style>
table {
    border-collapse: collapse;
    width:100%;
   
}

td, tr{
    border-collapse: collapse;
    padding: 10px;
    text-align: center;
}

thead {
    background-color: #000000;
    color: #ffffff;
}


</style>